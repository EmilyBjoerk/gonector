group 'org.li-soft'
version '1.0.0'

apply plugin: 'java'
apply plugin: 'findbugs'
apply plugin: 'jacoco'

//noinspection GroovyUnusedAssignment
sourceCompatibility = 1.8
[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

repositories {
    jcenter()
}

dependencies {
    compile 'org.apache.logging.log4j:log4j-api:2.7+',
    		'org.apache.logging.log4j:log4j-core:2.7+'
    testCompile 'junit:junit:4.11+', 
    			'org.mockito:mockito-core:2.1+' 
}

tasks.withType(FindBugs) {
    reports {
        xml.enabled false
        html.enabled true
    }
}

task wrapper(type: Wrapper) {
    gradleVersion = '3.1'
}

/*
findbugs {
    excludeFilter = file("$rootProject.projectDir/findbugsExclude.xml")
}*/

jacocoTestReport {
    reports {
        xml.enabled = true
        html.enabled = true
    }

    afterEvaluate {
        classDirectories = files(classDirectories.files.collect {
            fileTree(dir: it,
                    exclude: ['**/view_fx/**',
                              '**/datacache/gamedata/**',
                              '**/datacache/DataCache*'])
        })
    }
}
check.dependsOn jacocoTestReport